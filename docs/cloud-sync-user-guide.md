# 云同步功能使用指南

## 功能概述

云同步功能允许你将笔记上传到 OneDrive 云端，并在不同设备间同步访问。你可以自由选择云端保存位置和本地下载位置。

## 主要特性

1. **自定义云端保存位置** - 上传笔记时可以选择 OneDrive 中的任意文件夹
2. **自定义本地保存位置** - 下载笔记时可以选择本地保存路径
3. **文件夹浏览器** - 可视化浏览和选择 OneDrive 文件夹
4. **创建云端文件夹** - 在浏览器中直接创建新文件夹
5. **手动同步控制** - 完全由用户控制何时上传和下载

## 使用步骤

### 1. 连接 OneDrive 账户

首先需要连接你的 OneDrive 账户：

1. 点击左侧工具栏的 OneDrive 图标
2. 点击"连接 OneDrive"按钮
3. 在弹出的浏览器窗口中登录你的 Microsoft 账户
4. 授权应用访问你的 OneDrive

### 2. 上传笔记到云端

将本地笔记上传到 OneDrive：

1. 打开要上传的笔记
2. 点击顶部的"上传到云端"按钮
3. 在弹出的对话框中：
   - 查看笔记名称
   - 输入或选择云端保存位置（如 `/Notes`）
   - 点击"浏览"按钮可以可视化选择文件夹
4. 点击"上传"按钮完成上传

#### 使用文件夹浏览器

点击"浏览"按钮后：

1. 会显示 OneDrive 根目录的文件夹列表
2. 点击文件夹前的箭头可以展开查看子文件夹
3. 点击文件夹名称可以选择该文件夹
4. 点击"新建文件夹"可以在当前选中的位置创建新文件夹
5. 选择完成后点击"确定"

### 3. 从云端下载笔记

将云端笔记下载到本地：

1. 点击左侧工具栏的"云端笔记"图标
2. 查看云端笔记列表
3. 找到要下载的笔记，点击"下载"按钮
4. 在弹出的对话框中确认笔记信息
5. 点击"下载"后，系统会提示选择本地保存位置
6. 选择保存路径后，笔记会被下载到本地

### 4. 查看云端笔记列表

查看所有已上传的笔记：

1. 点击左侧工具栏的"云端笔记"图标
2. 列表会显示：
   - 笔记名称
   - 最后更新时间
   - 文件大小
   - 是否已在本地存在
3. 点击"刷新"按钮可以重新加载列表

## 注意事项

### 上传注意事项

1. **网络连接** - 确保设备已连接到互联网
2. **文件夹路径** - 云端路径格式为 `/文件夹名`，如 `/Notes` 或 `/Documents/MyNotes`
3. **文件夹不存在** - 如果指定的文件夹不存在，系统会自动创建
4. **覆盖提示** - 如果云端已存在同名笔记，会被覆盖

### 下载注意事项

1. **本地路径** - 下载时需要选择本地保存位置和文件名
2. **文件覆盖** - 如果本地已存在同名文件，会提示是否覆盖
3. **已存在标记** - 列表中会标记哪些笔记已在本地存在

### 同步策略

1. **手动同步** - 所有上传和下载操作都需要手动触发
2. **不自动同步** - 修改笔记后不会自动上传到云端
3. **独立操作** - 上传和下载是独立的操作，互不影响

## 常见问题

### Q: 如何知道笔记是否已上传到云端？

A: 查看"云端笔记"列表，如果笔记在列表中，说明已上传。

### Q: 可以上传到 OneDrive 的任意位置吗？

A: 是的，你可以选择 OneDrive 中的任意文件夹作为保存位置。

### Q: 下载的笔记保存在哪里？

A: 下载时你可以自由选择本地保存位置，系统会弹出文件保存对话框。

### Q: 如果云端和本地都有同一个笔记怎么办？

A: 系统会在列表中标记"本地已有"，你可以选择是否下载覆盖本地版本。

### Q: 上传失败怎么办？

A: 检查以下几点：
- 网络连接是否正常
- OneDrive 账户是否已连接
- 云端存储空间是否充足
- 文件夹路径格式是否正确

### Q: 可以创建多级文件夹吗？

A: 可以，在文件夹浏览器中可以逐级创建文件夹，或直接输入完整路径如 `/Notes/Work/Projects`。

## 技术细节

### 文件格式

- 笔记以 `.note` 格式保存
- 文件内容为 JSON 格式
- 包含笔记的所有页面、标签、书签等信息

### 存储位置

- 云端：OneDrive 中你指定的文件夹
- 本地：你选择的任意本地路径

### 同步机制

- 采用手动同步模式
- 不会自动检测文件变化
- 完全由用户控制同步时机

## 最佳实践

1. **统一文件夹** - 建议将所有笔记上传到同一个云端文件夹，便于管理
2. **定期备份** - 重要笔记建议定期上传到云端备份
3. **命名规范** - 使用清晰的笔记名称，便于在云端识别
4. **本地组织** - 下载时建议保存到统一的本地文件夹
5. **检查列表** - 上传前查看云端列表，避免重复上传

## 更新日志

### v1.0.0
- 实现基本的上传和下载功能
- 添加文件夹浏览器
- 支持创建云端文件夹
- 支持自定义保存位置
