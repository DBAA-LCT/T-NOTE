# 多账号云存储管理功能

## 功能概述

新的多账号管理系统允许你：
- 同时添加多个云存储账号（OneDrive 和百度网盘）
- 为同一类型的云盘添加多个不同账号（例如：工作 OneDrive + 个人 OneDrive）
- 设置默认账号用于快速上传
- 独立管理每个账号的同步设置

## 使用方法

### 1. 打开远程账号管理

点击侧边栏的"设置"图标，进入远程账号管理面板。

### 2. 添加账号

1. 点击右上角的"添加账号"按钮
2. 选择云盘类型（OneDrive 或百度网盘）
3. 输入账号名称（例如："工作账号"、"个人账号"）
4. 点击"添加"

### 3. 认证账号

添加账号后，系统会自动打开该账号的设置面板：
1. 点击"连接"按钮
2. 在浏览器中完成 OAuth 认证
3. 选择同步文件夹
4. 配置同步设置（WiFi only、冲突副本等）

### 4. 管理账号

在账号列表中，你可以：
- 点击账号卡片查看详细设置
- 点击星标图标设置默认账号
- 点击删除图标移除账号

### 5. 使用账号上传笔记

在笔记编辑界面：
1. 点击顶部的"上传到云端"按钮
2. 选择要使用的账号
3. 确认上传

## 技术架构

### 前端组件
- `RemoteAccountsPanel.tsx` - 账号管理主面板
- `CloudStoragePanel.tsx` - 通用云存储设置面板（支持适配器模式）

### 后端服务
- `remote-accounts-manager.ts` - 账号管理服务
- `remote-accounts-handlers.ts` - IPC 处理器

### 数据存储
账号信息存储在 `remote-accounts.json` 文件中，包含：
- 账号列表
- 每个账号的认证状态、用户信息、同步设置
- 默认账号 ID

## 迁移说明

从旧的单账号系统迁移：
1. 旧的 OneDrive 和百度网盘设置仍然保存在 `onedrive-sync-settings.json`
2. 首次使用新系统时，可以手动添加账号并重新认证
3. 旧的同步配置不会自动迁移，需要重新设置

## 未来扩展

该架构支持轻松添加新的云存储提供商：
1. 实现认证和 API 客户端
2. 在 `RemoteAccountsManager` 中添加对应的 provider 处理
3. 在 `PROVIDER_OPTIONS` 中添加新的选项
4. 无需修改 UI 代码
