# 页面级同步功能测试清单

## 编译状态

✅ TypeScript 编译成功
✅ Vite 构建成功

## 测试步骤

### 1. 基础功能测试

#### 1.1 连接 OneDrive
- [ ] 打开应用
- [ ] 点击 OneDrive 图标
- [ ] 点击"连接 OneDrive"
- [ ] 在浏览器中登录
- [ ] 验证连接成功

#### 1.2 创建笔记
- [ ] 创建新笔记
- [ ] 添加几个页面
- [ ] 编辑页面内容

#### 1.3 启用同步
- [ ] 在 OneDrive 设置中选择同步文件夹
- [ ] 验证笔记的 syncConfig.enabled 为 true

### 2. 手动提交测试

#### 2.1 提交单个页面
- [ ] 编辑页面内容
- [ ] 查看页面标题旁显示"未提交"标签
- [ ] 点击"提交到云端"按钮
- [ ] 验证显示"已同步"标签
- [ ] 在 OneDrive 网页中查看文件是否存在

#### 2.2 内容未变化
- [ ] 不修改页面内容
- [ ] 点击"提交到云端"
- [ ] 验证提示"页面内容未变化"

#### 2.3 提交失败
- [ ] 断开网络
- [ ] 编辑页面并提交
- [ ] 验证显示"提交失败"标签
- [ ] 恢复网络后重新提交

### 3. 自动提交测试

#### 3.1 启用自动提交
- [ ] 在设置中启用"自动提交"
- [ ] 编辑页面内容
- [ ] 等待 10 秒
- [ ] 验证自动上传成功
- [ ] 查看显示"自动同步"标签

#### 3.2 禁用自动提交
- [ ] 在设置中禁用"自动提交"
- [ ] 编辑页面内容
- [ ] 等待 10 秒
- [ ] 验证不会自动上传
- [ ] 显示"未提交"标签

### 4. 云端页面测试

#### 4.1 查看云端页面列表
- [ ] 打开"云端页面"面板
- [ ] 验证显示当前笔记的所有页面
- [ ] 检查页面状态正确显示

#### 4.2 页面状态
- [ ] 已同步页面显示绿色勾
- [ ] 未提交页面显示黄色感叹号
- [ ] 云端较新页面显示橙色图标

#### 4.3 刷新列表
- [ ] 点击"刷新"按钮
- [ ] 验证列表更新

### 5. 使用云端版本测试

#### 5.1 模拟云端较新
- [ ] 在设备A上编辑并提交页面
- [ ] 在设备B上编辑同一页面（不提交）
- [ ] 在设备B上刷新云端页面列表
- [ ] 验证显示"云端较新"

#### 5.2 使用云端版本
- [ ] 点击云端较新的页面
- [ ] 查看页面信息
- [ ] 点击"使用云端版本"
- [ ] 确认操作
- [ ] 验证本地内容被覆盖
- [ ] 验证状态变为"已同步"

### 6. 多页面测试

#### 6.1 批量提交
- [ ] 创建多个页面
- [ ] 编辑所有页面
- [ ] 逐个提交
- [ ] 验证所有页面都显示"已同步"

#### 6.2 混合状态
- [ ] 部分页面已同步
- [ ] 部分页面未提交
- [ ] 部分页面云端较新
- [ ] 验证状态显示正确

### 7. 边界情况测试

#### 7.1 大文件
- [ ] 创建包含大量内容的页面
- [ ] 提交到云端
- [ ] 验证上传成功

#### 7.2 特殊字符
- [ ] 页面内容包含特殊字符
- [ ] 提交到云端
- [ ] 下载并验证内容正确

#### 7.3 网络中断
- [ ] 提交过程中断开网络
- [ ] 验证错误处理
- [ ] 恢复网络后重试

#### 7.4 并发编辑
- [ ] 两个设备同时编辑不同页面
- [ ] 分别提交
- [ ] 验证都成功

### 8. 性能测试

#### 8.1 大量页面
- [ ] 创建 50+ 页面的笔记
- [ ] 测试提交速度
- [ ] 测试云端列表加载速度

#### 8.2 频繁编辑
- [ ] 快速连续编辑页面
- [ ] 验证自动提交的 debounce 工作正常

### 9. UI/UX 测试

#### 9.1 状态标签
- [ ] 验证所有状态标签显示正确
- [ ] 验证颜色和图标正确

#### 9.2 按钮状态
- [ ] 提交中按钮显示 loading
- [ ] 已同步时不显示提交按钮

#### 9.3 提示信息
- [ ] 成功提示清晰
- [ ] 错误提示有用
- [ ] 警告提示明确

### 10. 数据完整性测试

#### 10.1 内容一致性
- [ ] 提交后内容与本地一致
- [ ] 下载后内容与云端一致

#### 10.2 元数据
- [ ] 标签正确同步
- [ ] 书签正确同步
- [ ] 时间戳正确

#### 10.3 备份
- [ ] 使用云端版本前创建备份
- [ ] 备份可以恢复

## 已知问题

记录测试中发现的问题：

1. 
2. 
3. 

## 测试环境

- 操作系统：Windows
- Node 版本：v20.20.0
- 应用版本：1.0.0
- OneDrive 账号：

## 测试结果

- 测试日期：
- 测试人员：
- 通过率：__ / __
- 状态：[ ] 通过 [ ] 失败 [ ] 部分通过

## 备注

